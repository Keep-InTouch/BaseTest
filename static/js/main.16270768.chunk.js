(this.webpackJsonpTalk=this.webpackJsonpTalk||[]).push([[0],{44:function(e,t,a){e.exports=a(91)},53:function(e,t,a){},72:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=72},86:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),c=a.n(o),l=a(43),i=(a(53),a(6)),s=a(7),u=a(9),m=a(8),d=a(41),p=a(15),v=a(16),h=a(2),f=a.n(h),b=a(13),E=a(11),g=a(12),y=a.n(g),O=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).UPLOAD_POINT="http://localhost:8080/",e.state={host:"",moderator:"",participant:"",h:[],m:[],p:[]},e.update=e.update.bind(Object(E.a)(e)),e}return Object(s.a)(a,[{key:"handleClick",value:function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.target.value),(new FormData).append("usertype",t.target.value),e.next=5,y.a.post("".concat(this.UPLOAD_POINT,"make"),{usertype:t.target.value,username:this.state[t.target.value],password:"password"});case 5:this.update();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("".concat(this.UPLOAD_POINT,"users"),{usertype:"host"});case 2:return t=e.sent,this.setState({h:t.data}),e.next=6,y.a.post("".concat(this.UPLOAD_POINT,"users"),{usertype:"moderator"});case 6:return a=e.sent,this.setState({m:a.data}),e.next=10,y.a.post("".concat(this.UPLOAD_POINT,"users"),{usertype:"participant"});case 10:n=e.sent,this.setState({p:n.data});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.update();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Outer"},r.a.createElement("div",{className:"Inner"},r.a.createElement("div",{className:"makes"},r.a.createElement("input",{onChange:function(t){return e.setState(Object(v.a)({},t.target.name,t.target.value))},type:"text",name:"host",id:"host"}),r.a.createElement("input",{type:"submit",value:"host",onClick:function(t){return e.handleClick(t)}}),this.state.h.map((function(e){return r.a.createElement("p",null,e._id)}))),r.a.createElement("div",{className:"makes"},r.a.createElement("input",{onChange:function(t){return e.setState(Object(v.a)({},t.target.name,t.target.value))},type:"text",name:"moderator",id:"moderator"}),r.a.createElement("input",{type:"submit",value:"moderator",onClick:function(t){return e.handleClick(t)}}),this.state.m.map((function(e){return r.a.createElement("p",null,e._id)}))),r.a.createElement("div",{className:"makes"},r.a.createElement("input",{onChange:function(t){return e.setState(Object(v.a)({},t.target.name,t.target.value))},type:"text",name:"participant",id:"participant"}),r.a.createElement("input",{type:"submit",value:"participant",onClick:function(t){return e.handleClick(t)}}),this.state.p.map((function(e){return r.a.createElement("p",null,e._id)}))))))}}]),a}(n.Component),j=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={view:["",""]},e.handleSubmit=e.handleSubmit.bind(Object(E.a)(e)),e}return Object(s.a)(a,[{key:"handleSubmit",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("http://localhost:8080/make_room");case 2:return e.next=4,e.sent.data;case 4:t=e.sent,console.log(t),this.setState({view:[t.password,t._id]},(function(){return console.log(a.state.view)}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Outer"},r.a.createElement("div",{className:"Inner",style:{display:"block"}},r.a.createElement("input",{type:"submit",value:"Create Room",onClick:this.handleSubmit}),r.a.createElement("br",null),r.a.createElement("p",null,"RoomId:",this.state.view[1],r.a.createElement("br",null),"Password:",this.state.view[0]))))}}]),a}(n.Component),k=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={room_id:"5eba22e546181cdde18e4d69",username:"",data:""},e.handleSubmit=e.handleSubmit.bind(Object(E.a)(e)),e}return Object(s.a)(a,[{key:"handleSubmit",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("http://localhost:8080/add_to_room",{username:this.state.username,room_id:this.state.room_id});case 2:t=e.sent,this.setState({data:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Outer"},r.a.createElement("div",{className:"Inner",style:{display:"block"}},"RoomId",r.a.createElement("input",{type:"text",name:"room_id",id:"room_id",onChange:function(t){return e.setState(Object(v.a)({},t.target.name,t.target.value))},value:"5eba22e546181cdde18e4d69"}),r.a.createElement("br",null),"UserName",r.a.createElement("input",{type:"text",name:"username",id:"username",onChange:function(t){return e.setState(Object(v.a)({},t.target.name,t.target.value))}}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Join",onClick:function(){return e.handleSubmit()}}),this.state.data)))}}]),a}(n.Component),w=a(22),N=a.n(w),S=a(73),C=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={local:"",count:0},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,a,n,r,o,c=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return navigator.getWebcam=navigator.getUserMedia||navigator.webKitGetUserMedia||navigator.moxGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,(t=navigator.mediaDevices.getUserMedia)&&t({video:{facingMode:"user"},audio:!0}).then((function(e){c.setState({local:e});var t=document.querySelector("video#local");t.srcObject=e,t.onloadedmetadata=function(e){t.play()}})),a=S.parse(this.props.location.search).room,n=S.parse(this.props.location.search).peer,e.next=7,y.a.post("http://localhost:8080/calls",{room_id:a});case 7:r=e.sent,(o=new N.a(n,{host:"2f86ad1c.ngrok.io",path:"/myapp",secure:!0})).on("open",(function(){console.log("open")})),o.on("connection",(function(e){e.on("data",(function(e){console.log(e)})),e.on("error",(function(e){return console.log(e)})),e.on("open",(function(){return console.log("conn open")})),e.on("close",(function(){return console.log("conn closed")}))})),o.on("call",(function(e){e.answer(c.state.local),e.on("stream",(function(e){c.setState({remote:e});var t=c.state.count+1;c.setState({count:t});var a=document.querySelector(".remotes").appendChild(document.createElement("video"));a.srcObject=e,a.onloadedmetadata=function(e){a.play()}}))})),r=r.data.filter((function(e){return e!==n})),console.log(r),r.map((function(e){var t=o.connect(e);t.on("error",(function(e){return console.log(e)})),t.on("open",(function(){t.send("hi!")}));var a=o.call(e,c.state.local);console.log(a),a.on("stream",(function(e){c.setState({remote:e});var t=document.querySelector("video#remote");t.srcObject=e,t.onloadedmetadata=function(e){t.play()}}))}));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("video",{src:"",id:"local"}),r.a.createElement("br",null),r.a.createElement("div",{className:"remotes"},r.a.createElement("video",{src:"",id:"remote"})))}}]),a}(n.Component),x=(a(86),a(40)),_=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={copied:!1,joined:!1,id:function(){for(var e="qwertyuiopasdfghjklzxcvbnm".split(""),t="",a=0;a<9;a++){t+=e[Math.floor(1e3*Math.random()%26)],2!=a&&5!=a||(t+="-")}return console.log(t),t}()},e.connect=e.connect.bind(Object(E.a)(e)),e.stream=e.stream.bind(Object(E.a)(e)),e}return Object(s.a)(a,[{key:"connect",value:function(){var e=this.state.peer.connect(this.state.conn_id);e.on("error",(function(e){return console.log(e)})),e.on("open",(function(){e.send("hi!")}))}},{key:"stream",value:function(){var e=this;this.state.peer.call(this.state.conn_id,this.state.local).on("stream",(function(t){e.setState({remote:t});var a=document.querySelector("video#remote");a.srcObject=t,a.onloadedmetadata=function(e){a.play()}}))}},{key:"componentDidMount",value:function(){var e=this;navigator.getWebcam=navigator.getUserMedia||navigator.webKitGetUserMedia||navigator.moxGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var t=navigator.mediaDevices.getUserMedia;t&&t({video:{facingMode:"user"},audio:!0}).then((function(t){e.setState({local:t});var a=document.querySelector("video#local");a.srcObject=t,a.onloadedmetadata=function(e){a.play()}}));var a=new N.a(this.state.id,{host:"add52cc587dc.ngrok.io",path:"/myapp",secure:!0});this.setState({peer:a}),a.on("open",(function(){console.log("open")})),a.on("connection",(function(e){e.on("data",(function(e){console.log(e)})),e.on("error",(function(e){return console.log(e)})),e.on("open",(function(){return console.log("conn open")})),e.on("close",(function(){return console.log("conn closed")}))})),a.on("call",(function(t){t.answer(e.state.local),t.on("stream",(function(t){e.setState({remote:t});var a=document.querySelector("video#remote");a.srcObject=t,a.onloadedmetadata=function(e){a.play()}}))}))}},{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"title"},r.a.createElement("h1",{className:"textTitle"},"Talk!")),r.a.createElement("h3",null,"Your Meeting Code:"," ",r.a.createElement("strong",{className:"code"}," ",this.state.id," "),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(x.CopyToClipboard,{text:this.state.id,onCopy:function(){return e.setState({copied:!0})}},r.a.createElement("button",{className:"buttonCopy"},this.state.copied?r.a.createElement("span",{className:"Copied"},"Copied"):r.a.createElement("span",null,"Copy")))),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"conn_id",className:"input",placeholder:"Enter Meeting Code",onChange:function(t){return e.setState({conn_id:t.target.value},(function(){return console.log(e.state)}))}}),r.a.createElement("br",null),this.state.joined?r.a.createElement("span",null):r.a.createElement("input",{type:"submit",className:"btn button",value:"Join Meeting",onClick:function(t){e.connect(),e.setState({joined:!0})}})),this.state.joined?r.a.createElement("div",{className:""},r.a.createElement("input",{type:"button",className:"btn button",value:"Start Meeting",onClick:function(){return e.stream()}})):r.a.createElement("span",null),r.a.createElement("div",{className:"row onPC"},r.a.createElement("div",{className:"left col-6"},r.a.createElement("div",{className:""},r.a.createElement("video",{className:"video",muted:!0,style:{transform:"scaleX(-1)"},id:"local",src:""}))),r.a.createElement("div",{className:"right col-6"},r.a.createElement("div",{className:"video"},r.a.createElement("video",{className:"",id:"remote",src:""})))),r.a.createElement("div",{className:"row onPhone"},r.a.createElement("div",{className:" col-12"},r.a.createElement("div",{className:"video"},r.a.createElement("video",{className:"video",muted:!0,style:{transform:"scaleX(-1)"},id:"local",src:""}))),r.a.createElement("div",{className:"  col-12"},r.a.createElement("div",null,r.a.createElement("video",{className:"video",id:"remote",src:""}))))))}}]),a}(n.Component),M=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null,r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/create"},r.a.createElement(O,null)),r.a.createElement(p.a,{path:"/make_room"},r.a.createElement(j,null)),r.a.createElement(p.a,{path:"/join"},r.a.createElement(k,null)),r.a.createElement(p.a,{path:"/user_call",component:C}),r.a.createElement(p.a,{path:"/"},r.a.createElement(_,null)))))}}]),a}(n.Component),U=a(21);var D=Object(U.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{hello:[]},t=arguments.length>1?arguments[1]:void 0;return"ADD_HELLO"===t.type&&e.hello.push(t.payload),e}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{store:D},r.a.createElement(M,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.16270768.chunk.js.map