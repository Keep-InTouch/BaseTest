(this.webpackJsonpTalk=this.webpackJsonpTalk||[]).push([[0],{104:function(e,t,a){e.exports=a(177)},113:function(e,t,a){},131:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=131},144:function(e,t,a){},173:function(e,t){},177:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),o=a.n(c),l=a(95),s=(a(113),a(11)),i=a(12),u=a(13),m=a(14),d=a(93),p=a(30),v=a(33),h=a(15),f=a.n(h),b=a(22),E=a(17),g=a(20),y=a.n(g),O=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).UPLOAD_POINT="http://localhost:8080/",e.state={host:"",moderator:"",participant:"",h:[],m:[],p:[]},e.update=e.update.bind(Object(E.a)(e)),e}return Object(i.a)(a,[{key:"handleClick",value:function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.target.value),(new FormData).append("usertype",t.target.value),e.next=5,y.a.post("".concat(this.UPLOAD_POINT,"make"),{usertype:t.target.value,username:this.state[t.target.value],password:"password"});case 5:this.update();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("".concat(this.UPLOAD_POINT,"users"),{usertype:"host"});case 2:return t=e.sent,this.setState({h:t.data}),e.next=6,y.a.post("".concat(this.UPLOAD_POINT,"users"),{usertype:"moderator"});case 6:return a=e.sent,this.setState({m:a.data}),e.next=10,y.a.post("".concat(this.UPLOAD_POINT,"users"),{usertype:"participant"});case 10:n=e.sent,this.setState({p:n.data});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.update();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Outer"},r.a.createElement("div",{className:"Inner"},r.a.createElement("div",{className:"makes"},r.a.createElement("input",{onChange:function(t){return e.setState(Object(v.a)({},t.target.name,t.target.value))},type:"text",name:"host",id:"host"}),r.a.createElement("input",{type:"submit",value:"host",onClick:function(t){return e.handleClick(t)}}),this.state.h.map((function(e){return r.a.createElement("p",null,e._id)}))),r.a.createElement("div",{className:"makes"},r.a.createElement("input",{onChange:function(t){return e.setState(Object(v.a)({},t.target.name,t.target.value))},type:"text",name:"moderator",id:"moderator"}),r.a.createElement("input",{type:"submit",value:"moderator",onClick:function(t){return e.handleClick(t)}}),this.state.m.map((function(e){return r.a.createElement("p",null,e._id)}))),r.a.createElement("div",{className:"makes"},r.a.createElement("input",{onChange:function(t){return e.setState(Object(v.a)({},t.target.name,t.target.value))},type:"text",name:"participant",id:"participant"}),r.a.createElement("input",{type:"submit",value:"participant",onClick:function(t){return e.handleClick(t)}}),this.state.p.map((function(e){return r.a.createElement("p",null,e._id)}))))))}}]),a}(n.Component),j=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={view:["",""]},e.handleSubmit=e.handleSubmit.bind(Object(E.a)(e)),e}return Object(i.a)(a,[{key:"handleSubmit",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("http://localhost:8080/make_room");case 2:return e.next=4,e.sent.data;case 4:t=e.sent,console.log(t),this.setState({view:[t.password,t._id]},(function(){return console.log(a.state.view)}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Outer"},r.a.createElement("div",{className:"Inner",style:{display:"block"}},r.a.createElement("input",{type:"submit",value:"Create Room",onClick:this.handleSubmit}),r.a.createElement("br",null),r.a.createElement("p",null,"RoomId:",this.state.view[1],r.a.createElement("br",null),"Password:",this.state.view[0]))))}}]),a}(n.Component),k=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={room_id:"5eba22e546181cdde18e4d69",username:"",data:""},e.handleSubmit=e.handleSubmit.bind(Object(E.a)(e)),e}return Object(i.a)(a,[{key:"handleSubmit",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("http://localhost:8080/add_to_room",{username:this.state.username,room_id:this.state.room_id});case 2:t=e.sent,this.setState({data:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Outer"},r.a.createElement("div",{className:"Inner",style:{display:"block"}},"RoomId",r.a.createElement("input",{type:"text",name:"room_id",id:"room_id",onChange:function(t){return e.setState(Object(v.a)({},t.target.name,t.target.value))},value:"5eba22e546181cdde18e4d69"}),r.a.createElement("br",null),"UserName",r.a.createElement("input",{type:"text",name:"username",id:"username",onChange:function(t){return e.setState(Object(v.a)({},t.target.name,t.target.value))}}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Join",onClick:function(){return e.handleSubmit()}}),this.state.data)))}}]),a}(n.Component),N=a(49),w=a.n(N),C=a(132),S=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={local:"",count:0},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,a,n,r,c,o=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return navigator.getWebcam=navigator.getUserMedia||navigator.webKitGetUserMedia||navigator.moxGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,(t=navigator.mediaDevices.getUserMedia)&&t({video:{facingMode:"user"},audio:!0}).then((function(e){o.setState({local:e});var t=document.querySelector("video#local");t.srcObject=e,t.onloadedmetadata=function(e){t.play()}})),a=C.parse(this.props.location.search).room,n=C.parse(this.props.location.search).peer,e.next=7,y.a.post("http://localhost:8080/calls",{room_id:a});case 7:r=e.sent,(c=new w.a(n,{host:"2f86ad1c.ngrok.io",path:"/myapp",secure:!0})).on("open",(function(){console.log("open")})),c.on("connection",(function(e){e.on("data",(function(e){console.log(e)})),e.on("error",(function(e){return console.log(e)})),e.on("open",(function(){return console.log("conn open")})),e.on("close",(function(){return console.log("conn closed")}))})),c.on("call",(function(e){e.answer(o.state.local),e.on("stream",(function(e){o.setState({remote:e});var t=o.state.count+1;o.setState({count:t});var a=document.querySelector(".remotes").appendChild(document.createElement("video"));a.srcObject=e,a.onloadedmetadata=function(e){a.play()}}))})),r=r.data.filter((function(e){return e!==n})),console.log(r),r.map((function(e){var t=c.connect(e);t.on("error",(function(e){return console.log(e)})),t.on("open",(function(){t.send("hi!")}));var a=c.call(e,o.state.local);console.log(a),a.on("stream",(function(e){o.setState({remote:e});var t=document.querySelector("video#remote");t.srcObject=e,t.onloadedmetadata=function(e){t.play()}}))}));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("video",{src:"",id:"local"}),r.a.createElement("br",null),r.a.createElement("div",{className:"remotes"},r.a.createElement("video",{src:"",id:"remote"})))}}]),a}(n.Component),x=(a(144),a(90)),_=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={copied:!1,joined:!1,id:function(){for(var e="qwertyuiopasdfghjklzxcvbnm".split(""),t="",a=0;a<9;a++){t+=e[Math.floor(1e3*Math.random()%26)],2!=a&&5!=a||(t+="-")}return console.log(t),t}(),endpoint:"https://f5e17a30b132.ngrok.io",peerpoint:{},username:"Test"},e.connect=e.connect.bind(Object(E.a)(e)),e.stream=e.stream.bind(Object(E.a)(e)),e.screenshot=e.screenshot.bind(Object(E.a)(e)),e}return Object(i.a)(a,[{key:"connect",value:function(){var e=this.state.peer.connect(this.state.conn_id);e.on("error",(function(e){return console.log(e)})),e.on("open",(function(){e.send("hi!")}))}},{key:"stream",value:function(){var e=this;this.state.peer.call(this.state.conn_id,this.state.local).on("stream",(function(t){e.setState({remote:t});var a=document.querySelector("video#remote");a.srcObject=t,a.onloadedmetadata=function(e){a.play()}}))}},{key:"componentDidMount",value:function(){var e=this;navigator.getWebcam=navigator.getUserMedia||navigator.webKitGetUserMedia||navigator.moxGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var t=navigator.mediaDevices.getUserMedia;t&&t({video:{facingMode:"user"},audio:!0}).then((function(t){e.setState({local:t});var a=document.querySelector("video#local");a.srcObject=t,a.onloadedmetadata=function(e){a.play()}}));var a=new w.a(this.state.id,{host:"35c4dcff5203.ngrok.io",path:"/myapp",secure:!0});this.setState({peer:a}),a.on("open",(function(){console.log("open")})),a.on("connection",(function(e){e.on("data",(function(e){console.log(e)})),e.on("error",(function(e){return console.log(e)})),e.on("open",(function(){return console.log("conn open")})),e.on("close",(function(){return console.log("conn closed")}))})),a.on("call",(function(t){t.answer(e.state.local),t.on("stream",(function(t){e.setState({remote:t});var a=document.querySelector("video#remote");a.srcObject=t,a.onloadedmetadata=function(e){a.play()}}))}))}},{key:"screenshot",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=document.querySelector("video#local"),(a=document.querySelector("canvas#canvas-local")).width=t.videoWidth,a.height=t.videoHeight,a.getContext("2d").drawImage(t,0,0,t.videoWidth,t.videoHeight),y.a.post(this.state.endpoint+"confirm",{username:this.state.username,basedata:a.toDataURL("image/jpeg")});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"title"},r.a.createElement("h1",{className:"textTitle"},"Talk!")),r.a.createElement("h3",null,"Your Meeting Code:"," ",r.a.createElement("strong",{className:"code"}," ",this.state.id," "),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(x.CopyToClipboard,{text:this.state.id,onCopy:function(){return e.setState({copied:!0})}},r.a.createElement("button",{className:"buttonCopy"},this.state.copied?r.a.createElement("span",{className:"Copied"},"Copied"):r.a.createElement("span",null,"Copy")))),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"conn_id",className:"input",placeholder:"Enter Meeting Code",onChange:function(t){return e.setState({conn_id:t.target.value},(function(){return console.log(e.state)}))}}),r.a.createElement("br",null),this.state.joined?r.a.createElement("span",null):r.a.createElement("input",{type:"submit",className:"btn button",value:"Join Meeting",onClick:function(t){e.connect(),e.setState({joined:!0})}})),this.state.joined?r.a.createElement("div",{className:""},r.a.createElement("input",{type:"button",className:"btn button",value:"Start Meeting",onClick:function(){return e.stream()}})):r.a.createElement("span",null),r.a.createElement("div",{className:"row onPC"},r.a.createElement("div",{className:"left col-6"},r.a.createElement("div",{className:""},r.a.createElement("video",{className:"video",muted:!0,style:{transform:"scaleX(-1)"},id:"local",src:""}),r.a.createElement("br",null),r.a.createElement("input",{type:"text",valur:this.state.username,onChange:function(t){return e.setState({username:t.target.value})}}),r.a.createElement("button",{onClick:function(){return e.screenshot()}},"verfy"),r.a.createElement("canvas",{id:"canvas-local",style:{overflow:"auto",display:"none"}}))),r.a.createElement("div",{className:"right col-6"},r.a.createElement("div",{className:"video"},r.a.createElement("video",{className:"",id:"remote",src:""}),r.a.createElement("canvas",{id:"canvas-local",style:{overflow:"auto"}})))),r.a.createElement("div",{className:"row onPhone"},r.a.createElement("div",{className:" col-12"},r.a.createElement("div",{className:"video"},r.a.createElement("video",{className:"video",muted:!0,style:{transform:"scaleX(-1)"},id:"local",src:""}))),r.a.createElement("div",{className:"  col-12"},r.a.createElement("div",null,r.a.createElement("video",{className:"video",id:"remote",src:""}))))))}}]),a}(n.Component),M=a(64),U=a(215),P=a(222),D=a(218),I=a(220),F=a(221),T=a(217),q=a(216),L=a(91),A=a.n(L),R=a(92),G=a.n(R),B=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).onClickHandler=function(){(new FormData).append("file",e.state.selectedFile)},e.state={response:!1,endpoint:"https://f5e17a30b132.ngrok.io",screenshot:null,image_name:0,username:"Test",first:"",last:"",mobile:"",email:"",dob:"",gender:""},e.screenshot=e.screenshot.bind(Object(E.a)(e)),e}return Object(i.a)(a,[{key:"screenshot",value:function(){var e=this,t=this.state.endpoint;console.log(t);var a=G()(t);this.setState({image_name:0});var n=setInterval((function(){249===e.state.image_name&&(clearInterval(n),a.emit("Process",{username:e.state.username}));var t=e.state.image_name+1,r=e.refs.webcam.getScreenshot();e.setState({screenshot:r,image_name:t},(function(){return a.emit("ImageByClient",{image:!0,buffer:e.state.screenshot,username:e.state.username,image_name:"".concat(e.state.username).concat(e.state.image_name)})}))}),10)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,"Username:"," ",r.a.createElement("input",{type:"text",value:this.state.username,onChange:function(t){return e.setState({username:[t.target.value]})}})," ",r.a.createElement("br",null),"Endpoint:"," ",r.a.createElement("input",{type:"text",value:this.state.endpoint,onChange:function(t){return e.setState({endpoint:t.target.value},(function(){return console.log(e.state.endpoint)}))}}),r.a.createElement("div",{className:"title"},"Register facial details"),r.a.createElement("div",{className:"camera"},r.a.createElement(A.a,{audio:!1,class:"webcam",ref:"webcam"}),r.a.createElement("br",null)," ",250-this.state.image_name,r.a.createElement("a",{href:"#nada",class:"button btn-hello btn-two",variant:"contained",color:"primary",onClick:function(t){e.screenshot(),t.preventDefault()}},r.a.createElement("span",null,"Register Face"))))}}]),a}(n.Component),W=a(219),H=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"title"},"User Details"),r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement(W.a,{name:"first",required:!0,id:"FName",label:"First Name",variant:"outlined"})),r.a.createElement("div",{className:"col-6"},r.a.createElement(W.a,{name:"last",required:!0,id:"LName",label:"Last Name",variant:"outlined"})),r.a.createElement("div",{className:"col-6"},r.a.createElement(W.a,{name:"mobile",required:!0,id:"PhoneNumber",label:"Phone Number",type:"tel",variant:"outlined"})),r.a.createElement("div",{className:"col-6"},r.a.createElement(W.a,{name:"email",required:!0,id:"Email-ID",label:"Email ID",type:"email",variant:"outlined"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement(W.a,{name:"dob",id:"date",label:"Birthday",type:"date",InputLabelProps:{shrink:!0}})),r.a.createElement("div",{className:"col-6"},r.a.createElement(W.a,{name:"password",required:!0,id:"Password",type:"Password",label:"Password",variant:"outlined"}))),r.a.createElement("a",{href:"!#",class:"button btn-two",style:{visibility:"hidden"}},r.a.createElement("span",null,"Add Details"))))}}]),a}(n.Component),J=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Make sure you have read and confirmed all details thank you!"),r.a.createElement("a",{href:"!#",class:"button btn-two",onClick:function(){return e.screenshot()}},r.a.createElement("span",null,"SUBMIT")))}}]),a}(n.Component),z=Object(U.a)((function(e){return{root:{width:"100%"},button:{marginRight:e.spacing(1)},instructions:{},buttonSet:{marginTop:10}}}));function K(){var e=z(),t=r.a.useState(0),a=Object(M.a)(t,2),n=a[0],c=a[1],o=r.a.useState(new Set),l=Object(M.a)(o,2),s=l[0],i=l[1],u=["User Details","Register Face","Submit"],m=function(e){return s.has(e)};return r.a.createElement("div",{className:e.root},r.a.createElement(P.a,{activeStep:n},u.map((function(e,t){var a={},n={};return m(t)&&(a.completed=!1),r.a.createElement(D.a,Object.assign({key:e},a),r.a.createElement(F.a,n,e))}))),r.a.createElement("div",null,n===u.length?r.a.createElement("div",null,r.a.createElement(T.a,{className:e.instructions},"All steps completed - you're finished"),r.a.createElement(I.a,{onClick:function(){c(0)},className:e.button},"Reset")):r.a.createElement("div",null,r.a.createElement(T.a,{className:e.instructions},function(e){switch(e){case 0:return r.a.createElement(q.a,{fixed:!0},r.a.createElement(H,null));case 1:return r.a.createElement(q.a,{fixed:!0},r.a.createElement(B,null));case 2:return r.a.createElement(J,null);default:return"Unknown step error"}}(n)),r.a.createElement("div",{className:e.buttonSet},r.a.createElement(I.a,{disabled:0===n,onClick:function(){c((function(e){return e-1}))},className:e.button},"Back"),void 0,r.a.createElement(I.a,{variant:"contained",color:"primary",onClick:function(){var e=s;m(n)&&(e=new Set(e.values())).delete(n),c((function(e){return e+1})),i(e)},className:e.button},n===u.length-1?"Finish":"COnfirm")))))}var X=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"Page"},r.a.createElement("div",{className:"LoginPage"},r.a.createElement("div",{className:"block"},r.a.createElement("span",{className:"titleMain"},"Register Here"),r.a.createElement("div",{className:"row onPC "},r.a.createElement(K,null)),r.a.createElement("div",{className:"row onPhone rowe"},r.a.createElement(K,null)))))}}]),a}(n.Component),Y=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null,r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/create"},r.a.createElement(O,null)),r.a.createElement(p.a,{path:"/make_room"},r.a.createElement(j,null)),r.a.createElement(p.a,{path:"/join"},r.a.createElement(k,null)),r.a.createElement(p.a,{path:"/user_call",component:S}),r.a.createElement(p.a,{path:"/register"},r.a.createElement(X,null)),r.a.createElement(p.a,{path:"/",exact:!0},r.a.createElement(_,null)))))}}]),a}(n.Component),$=a(48);var Q=Object($.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{hello:[]},t=arguments.length>1?arguments[1]:void 0;return"ADD_HELLO"===t.type&&e.hello.push(t.payload),e}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{store:Q},r.a.createElement(Y,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[104,1,2]]]);
//# sourceMappingURL=main.b51e57de.chunk.js.map